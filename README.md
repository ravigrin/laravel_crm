# Laravel CRM ‚Äî Lead Integration Platform

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π Laravel‚Äë—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–∏—ë–º–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∏–¥–æ–≤ –≤–æ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ, –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–∞/–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞):**

- –°–ª–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è: `app/Models` (–æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å `Lead`), –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ `database/migrations`, —Ñ–∞–±—Ä–∏–∫–∏/—Å–∏–¥–µ—Ä—ã –≤ `database/factories` –∏ `database/seeders`.
- API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: JSON:API V1 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `app/JsonApi/V1/*`; –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî `tests/Feature/ApiExamples.http`; —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ V2 –æ–ø–∏—Å–∞–Ω–æ –≤ `_dev/API_CONTRACTS.md`.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Å–ª–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –≤ `app/Services/Integration/*`; –∫–∞–∂–¥–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ jobs (`app/Jobs/Integrations/*`) –∏ –æ—á–µ—Ä–µ–¥—å (Redis/Horizon).
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–æ–≤: –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –≤ `app/Observers` –∏ `app/Services/Lead/*` (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ `is_test/viewed/paid/blocked`).
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö: –ø–æ–ª–µ `contacts` —à–∏—Ñ—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `app/Services/Encryption/LeadContactEncryptionService` –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º; –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ ‚Äî –≤ `.env`.
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ—á–µ—Ä–µ–¥–∏ –∏ Horizon –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏; stateless API —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è; PostgreSQL + Redis –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö/–∫—ç—à–∞/–æ—á–µ—Ä–µ–¥–µ–π.
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CI: –Ω–∞–±–æ—Ä unit/feature/integration —Ç–µ—Å—Ç–æ–≤ –≤ `tests/`; CI –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ `phpunit.xml` –∏ `composer install` + `php artisan test`.

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏–¥–æ–≤ (`Lead` –º–æ–¥–µ–ª—å) —Å —Ñ–ª–∞–≥–∞–º–∏ `is_test`, `viewed`, `paid`, `blocked`.
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª–µ `contacts` —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
- –ú–µ—Ö–∞–Ω–∏–∑–º—ã –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –ø–æ `fingerprint` –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (`equal_answer_id`).
- –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (email, Telegram, RetailCRM, AmoCRM –∏ –¥—Ä.) —á–µ—Ä–µ–∑ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `Integration` —Å–ª–æ–π.
- JSON:API (V1) endpoints –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ `tests/Feature/ApiExamples.http`.
- –û—á–µ—Ä–µ–¥–∏, Horizon‚Äë–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ jobs –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏/–ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∏–¥–æ–≤.
- –§–∞–±—Ä–∏–∫–∏, —Å–∏–¥–µ—Ä—ã –∏ –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ (Feature/Integration/Unit).

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ):**

```bash
composer install
cp .env.example .env
php artisan key:generate
# –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Docker
# docker-compose up -d
# docker-compose exec php_fpm php artisan migrate --seed
php artisan test
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[CONTRIBUTING.md](CONTRIBUTING.md)** ‚Äî –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏–ª–∏ –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- **[DEPLOYMENT.md](DEPLOYMENT.md)** ‚Äî Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞  
- **[TROUBLESHOOTING.md](TROUBLESHOOTING.md)** ‚Äî –†–µ—à–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **[config/rate_limits.php](config/rate_limits.php)** ‚Äî –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- **[config/monitoring.php](config/monitoring.php)** ‚Äî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
- **[config/integrations.php](config/integrations.php)** ‚Äî –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

## üîç –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
./vendor/bin/pint

# –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤
./vendor/bin/phpstan analyse app

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
php artisan test --coverage --min=80

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer audit
```
